<!DOCTYPE html>
<html lang="ko" x-data="app()" :class="{dark: theme==='dark'}" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SwingFit — 온디바이스 AI × LLM 골프 스윙 분석</title>
  <meta name="description" content="스마트폰 온디바이스 AI와 LLM 융합으로 스윙 분석·비거리 예측·개인화 피드백을 제공하는 캡스톤 프로젝트 SwingFit." />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            /* Logo palette + purple accent */
            mint: { DEFAULT:'#61E4C5',50:'#ECFFFA',100:'#D5FFF4',200:'#AFFFF0',300:'#85F7E2',400:'#61E4C5',500:'#34C3A2',600:'#25A486',700:'#1E846D',800:'#176B59',900:'#0F4B40' },
            mintMain: '#5BC1A1',
            mintLight: '#A2E2C9',
            mintDark: '#2E7C68',
            charcoal: '#3A4C45',
            purple: { DEFAULT:'#7C6FF6' }
          },
          fontFamily: {
            sans: ['Pretendard','ui-sans-serif','system-ui','-apple-system','Segoe UI','Noto Sans KR','Helvetica','Arial','Apple SD Gothic Neo','Malgun Gothic','sans-serif']
          },
          boxShadow: {
            glow: '0 10px 30px rgba(124,111,246,0.25)'
          }
        }
      }
    }
  </script>

  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    [data-reveal]{opacity:0;transform:translateY(12px);transition:opacity .6s ease,transform .6s ease}
    [data-reveal].visible{opacity:1;transform:translateY(0)}
  </style>
</head>
<body class="bg-white text-gray-900 dark:bg-neutral-950 dark:text-neutral-100">

  <!-- NAV -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/75 dark:bg-neutral-950/70 border-b border-black/5 dark:border-white/10">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#home" class="flex items-center gap-2 font-bold">
        <span class="inline-block w-8 h-8 rounded-xl bg-gradient-to-br from-mintMain to-purple shadow-glow"></span>
        <span>SwingFit</span>
      </a>
      <nav class="hidden md:flex gap-6 text-sm font-medium">
        <a href="#about" class="hover:text-purple">소개</a>
        <a href="#features" class="hover:text-purple">주요기능</a>
        <a href="#system" class="hover:text-purple">시스템</a>
        <a href="#math" class="hover:text-purple">수식</a>
        <a href="#metrics" class="hover:text-purple">성능</a>
        <a href="#timeline" class="hover:text-purple">타임라인</a>
      </nav>
      <div class="flex items-center gap-2">
        <!-- FIX: must use x-text ({{ }}) breaks on Alpine) -->
        <button @click="toggleTheme" x-text="theme==='dark' ? '라이트' : '다크'"
                class="px-3 py-1.5 rounded-xl border border-black/10 dark:border-white/10 text-xs"></button>
        <a :href="data.repo" target="_blank" class="px-3 py-1.5 rounded-xl bg-purple text-white text-xs shadow-glow">GitHub</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section id="home" class="relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-mintLight/30 via-transparent to-purple/30 pointer-events-none"></div>
    <div class="max-w-7xl mx-auto px-4 py-16 lg:py-24 grid lg:grid-cols-2 gap-10 items-center">
      <div data-reveal>
        <h1 class="text-3xl md:text-5xl font-extrabold leading-tight">
          온디바이스 AI × LLM 융합
          <span class="block text-transparent bg-clip-text bg-gradient-to-r from-purple to-mintMain">골프 스윙 분석·비거리 예측</span>
        </h1>
        <ul class="mt-6 space-y-2 text-lg list-disc pl-5">
          <li>스마트폰 단일 기기로 스윙 분석·비거리 예측·개인화 피드백 제공</li>
          <li>YOLOv8n TFLite 온디바이스 추론 + Gemini 2.5 기반 텍스트 피드백</li>
          <li>Firebase 동기화·클라우드 후처리·사용자 맞춤 리포트</li>
        </ul>
        <div class="mt-8 flex flex-wrap gap-3">
          <a :href="data.repo" target="_blank" class="px-5 py-3 rounded-2xl bg-purple text-white shadow-glow">깃허브 저장소</a>
          <a href="#demo" class="px-5 py-3 rounded-2xl border border-black/10 dark:border-white/10">데모 보기</a>
        </div>
        <div class="mt-4 text-xs text-gray-500">※ 이 페이지는 단일 HTML로 GitHub Pages에서 바로 동작.</div>
      </div>

      <!-- System diagram image -->
      <div class="relative" data-reveal>
        <div class="aspect-video rounded-3xl border border-black/10 dark:border-white/10 bg-gradient-to-br from-white to-neutral-50 dark:from-neutral-900 dark:to-neutral-800 p-4">
          <img src="assets/system.png" alt="SwingFit 시스템 개념도" class="w-full h-full object-contain rounded-2xl"/>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="py-16 border-t border-black/5 dark:border-white/10 bg-white dark:bg-neutral-950">
    <div class="max-w-7xl mx-auto px-4 grid lg:grid-cols-3 gap-8">
      <div class="lg:col-span-2" data-reveal>
        <h2 class="text-2xl font-bold">작품설명</h2>
        <ul class="mt-4 space-y-2 list-disc pl-5">
          <li>스마트폰 온디바이스 모델로 스윙/공 궤적을 실시간 분석.</li>
          <li>클라우드 LLM이 코칭 문구·훈련 과제를 자동 생성.</li>
          <li>Firebase로 기록·비교·공유 일원화.</li>
        </ul>
      </div>
      <aside data-reveal>
        <div class="p-5 rounded-2xl border border-black/10 dark:border-white/10 bg-neutral-50 dark:bg-neutral-900">
          <div class="text-sm font-semibold">하이라이트</div>
          <ul class="mt-3 text-sm space-y-2 list-disc pl-5">
            <li>YOLOv8n TFLite(FP16/INT8) + XNNPACK/GPU delegate</li>
            <li>Gemini 2.5 Pro 기반 맥락형 피드백</li>
            <li>Firestore/Auth/Functions 연동</li>
            <li>4K/120fps 입력 파이프라인</li>
          </ul>
        </div>
      </aside>
    </div>
  </section>

  <!-- FEATURES -->
  <section id="features" class="py-16">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-2xl font-bold" data-reveal>주요 기능</h2>
      <div class="mt-6 grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <template x-for="f in data.features" :key="f.title">
          <div class="p-6 rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-neutral-900" data-reveal>
            <div class="text-sm font-semibold" x-text="f.title"></div>
            <ul class="mt-3 text-sm space-y-1 list-disc pl-5">
              <template x-for="b in f.bullets"><li x-text="b"></li></template>
            </ul>
          </div>
        </template>
      </div>
    </div>
  </section>

  <!-- SYSTEM DETAILS -->
  <section id="system" class="py-16 border-t border-black/5 dark:border-white/10">
    <div class="max-w-7xl mx-auto px-4 grid lg:grid-cols-3 gap-8">
      <div class="lg:col-span-2" data-reveal>
        <h2 class="text-2xl font-bold">시스템 구성</h2>
        <ul class="mt-4 space-y-2 list-disc pl-5 text-sm">
          <li>안드로이드: Camera2/CameraX, ExoPlayer, Overlay ROI, BottomSheet UI</li>
          <li>온디바이스 추론: YOLOv8n FP16/INT8 TFLite, XNNPACK·GPU delegate 선택</li>
          <li>클라우드: Firebase Auth/Firestore/Functions/Storage</li>
          <li>LLM: Gemini 2.5 Pro 기반 피드백 생성(스트리밍 제외)</li>
          <li>데이터: <code>ball-analyses</code>, <code>swing-analyses</code> 컬렉션</li>
          <li>왕복 최소화·리사이징·포맷 최적화로 체감속도 개선</li>
        </ul>
      </div>
      <aside data-reveal>
        <div class="p-5 rounded-2xl border border-black/10 dark:border-white/10 bg-neutral-50 dark:bg-neutral-900">
          <div class="text-sm font-semibold">개발 환경</div>
          <ul class="mt-3 text-sm space-y-1 list-disc pl-5">
            <li>Android Studio (Kotlin)</li>
            <li>Pixel 6, Motorola razr 2023 테스트</li>
            <li>SDK 31~36, TFLite 2.14, tflite-support 0.4.4</li>
            <li>INT8 QAT 로드맵</li>
          </ul>
        </div>
      </aside>
    </div>
  </section>

  <!-- MATH (image only) -->
  <section id="math" class="py-16">
    <div class="max-w-7xl mx-auto px-4" data-reveal>
      <h2 class="text-2xl font-bold mb-6">핵심 수식</h2>
      <div class="rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-neutral-900 p-5 flex justify-center">
        <img src="assets/math.png" alt="핵심 수식" class="w-full max-w-3xl h-auto rounded-xl"/>
      </div>
    </div>
  </section>

  <!-- METRICS -->
  <section id="metrics" class="py-16 border-t border-black/5 dark:border-white/10">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-2xl font-bold" data-reveal>성능 지표</h2>

      <div class="grid lg:grid-cols-2 gap-8 mt-6">
        <!-- mAP -->
        <div class="p-6 rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-neutral-900" data-reveal>
          <canvas id="mapChart" class="w-full h-64"></canvas>
          <div class="mt-3 text-xs text-gray-500">• mAP 비교: 공/스윙, @0.5 및 종합(참고치)</div>
        </div>

        <!-- FPS/Latency -->
        <div class="p-6 rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-neutral-900" data-reveal>
          <div class="text-sm font-semibold">지연/처리 시간</div>
          <ul class="mt-3 text-sm space-y-1 list-disc pl-5">
            <li>온디바이스 추론(FP16·XNNPACK): 평균 25–30 FPS</li>
            <li>평균 추론 지연시간: 약 38 ms</li>
          </ul>
          <canvas id="latencyChart" class="w-full h-56 mt-4"></canvas>
        </div>
      </div>

      <div class="grid lg:grid-cols-2 gap-8 mt-8">
        <!-- Error/Distance -->
        <div class="p-6 rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-neutral-900" data-reveal>
          <div class="text-sm font-semibold">실측 vs 예측</div>
          <ul class="mt-3 text-sm space-y-1 list-disc pl-5">
            <li>비거리 오차율: ±8.7%</li>
            <li>예측값 245 m 기준 ±8% 범위</li>
          </ul>
          <canvas id="errorChart" class="w-full h-56 mt-4"></canvas>
        </div>

        <div class="p-6 rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-neutral-900" data-reveal>
          <div class="text-sm font-semibold">비고</div>
          <ul class="mt-3 text-sm space-y-1 list-disc pl-5">
            <li>INT8 QAT 전환 시 추가 단축 기대, GPU delegate 선택적 사용</li>
            <li>기기·세팅에 따라 수치 편차 존재(리포지토리 벤치마크 참조)</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- DEMO -->
  <section id="demo" class="py-16">
    <div class="max-w-7xl mx-auto px-4 grid lg:grid-cols-2 gap-8 items-start">
      <div data-reveal>
        <h2 class="text-2xl font-bold">데모</h2>
        <div class="mt-4 aspect-video rounded-2xl overflow-hidden border border-black/10 dark:border-white/10 bg-neutral-200 dark:bg-neutral-800 grid place-items-center">
          <div class="text-sm text-gray-600 dark:text-gray-300">프로토타입 영상 또는 GIF를 /assets 로 추가하십시오.</div>
        </div>
        <ul class="mt-3 text-sm space-y-1 list-disc pl-5">
          <li>스윙 구간 자동 탐지 → 피처 추출 → 비거리 예측</li>
          <li>LLM 피드백: 자세·템포·임팩트 코칭 텍스트</li>
          <li>결과 화면: 세션별 카드, 비교, 공유</li>
        </ul>
      </div>
      <div data-reveal>
        <h2 class="text-2xl font-bold">예시 스크린</h2>
        <div class="mt-4 grid grid-cols-2 gap-4">
          <div class="aspect-[9/19] rounded-xl border border-black/10 dark:border-white/10 bg-neutral-100 dark:bg-neutral-800"></div>
          <div class="aspect-[9/19] rounded-xl border border-black/10 dark:border-white/10 bg-neutral-100 dark:bg-neutral-800"></div>
          <div class="aspect-[9/19] rounded-xl border border-black/10 dark:border-white/10 bg-neutral-100 dark:bg-neutral-800"></div>
          <div class="aspect-[9/19] rounded-xl border border-black/10 dark:border-white/10 bg-neutral-100 dark:bg-neutral-800"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- TIMELINE (image) -->
  <section id="timeline" class="py-16 border-t border-black/5 dark:border-white/10">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-2xl font-bold" data-reveal>타임라인</h2>
      <div class="mt-6 p-4 rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-neutral-900" data-reveal>
        <img src="assets/timeline.png" alt="개발일정 타임라인" class="w-full h-auto rounded-xl" />
        <div class="mt-2 text-xs text-gray-500">※ 포스터와 동일한 개발일정 이미지를 사용합니다. (/assets/timeline.png)</div>
      </div>
    </div>
  </section>

  <!-- TEAM -->
  <section id="team" class="py-16 border-t border-black/5 dark:border-white/10">
    <div class="max-w-7xl mx-auto px-4 grid lg:grid-cols-2 gap-8">
      <div data-reveal>
        <h2 class="text-2xl font-bold">팀 & 고지</h2>
        <ul class="mt-4 text-sm space-y-1 list-disc pl-5">
          <li>한신대학교 컴퓨터공학부: 송하빈, 주상혁, 박승정</li>
          <li>지도교수: 박기홍</li>
          <li>SW중심대학사업 지원</li>
        </ul>
      </div>
      <div data-reveal>
        <h2 class="text-2xl font-bold">연락처</h2>
        <ul class="mt-4 text-sm space-y-1 list-disc pl-5">
          <li>이슈·기여: <a :href="data.repo + '/issues'" class="underline">GitHub Issues</a></li>
          <li>문의: 프로젝트 리드 이메일</li>
        </ul>
        <div class="mt-4 text-xs text-gray-500">• 개인정보·촬영 데이터는 동의하에 취급. 업로드 최소화 원칙.</div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="py-10 text-center text-xs text-gray-500">
    <div>© 2025 SwingFit. All rights reserved.</div>
  </footer>

  <!-- APP STATE + Charts -->
  <script>
    function app(){
      return {
        theme: (localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark':'light')),
        data: {
          repo: 'https://github.com/your-org/swingfit', // TODO: 실제 저장소 URL
          features: [
            { title: '스윙 분석', bullets:['YOLOv8n으로 키포인트·클럽헤드 인접 객체 검출','임팩트 전후 프레임 기반 이벤트 추출','ROI/Overlay 사용자 가이드'] },
            { title: '비거리 예측', bullets:['물리 근사 + ML 보정','클럽 타입·환경 파라미터 반영','세션별 평균·분산·트렌드'] },
            { title: 'LLM 피드백', bullets:['Gemini 2.5 Pro로 코칭 문구 생성','가드 프로ンプ팅 적용','훈련 플랜 제안(요약·To-Do)'] },
            { title: '저장·동기화', bullets:['Firebase Auth/Firestore/Storage','세션 카드·검색·필터','팀 공유·비교 보기'] },
            { title: '성능 최적화', bullets:['FP16/XNNPACK, 선택적 GPU delegate','INT8 QAT 로드맵','업로드 왕복 최소화'] },
            { title: 'UX', bullets:['로고 민트+보라 포인트','BottomSheet + 카드 UI','가독성/접근성 튜닝'] }
          ]
        },
        toggleTheme(){ this.theme = this.theme==='dark' ? 'light' : 'dark'; localStorage.setItem('theme', this.theme); },
      }
    }

    // reveal
    const onScrollReveal = () => {
      document.querySelectorAll('[data-reveal]').forEach(el=>{
        const r = el.getBoundingClientRect();
        if(r.top < window.innerHeight - 120) el.classList.add('visible');
      });
    };
    window.addEventListener('scroll', onScrollReveal, {passive:true});
    window.addEventListener('load', onScrollReveal);

    // charts (logo mint + purple)
    window.addEventListener('load', ()=>{
      // mAP
      const mapCtx = document.getElementById('mapChart');
      if(mapCtx){
        new Chart(mapCtx,{
          type:'bar',
          data:{
            labels:['mAP@50 (Ball)','mAP@50-95 (Ball)','mAP@50 (Swing)','mAP@50-95 (Swing)'],
            datasets:[{label:'mAP',data:[93,84,88,80],backgroundColor:['#7C6FF6','#5BC1A1','#7C6FF6','#5BC1A1']}]
          },
          options:{responsive:true,scales:{y:{beginAtZero:true,max:100}},plugins:{legend:{display:false}}}
        });
      }
      // FPS & Latency
      const latCtx = document.getElementById('latencyChart');
      if(latCtx){
        new Chart(latCtx,{
          type:'bar',
          data:{labels:['FPS (avg)','Latency (ms)'],datasets:[{data:[28,38],backgroundColor:['#5BC1A1','#7C6FF6']}]},
          options:{responsive:true,scales:{y:{beginAtZero:true}},plugins:{legend:{display:false}}}
        });
      }
      // Predicted distance & Error
      const errCtx = document.getElementById('errorChart');
      if(errCtx){
        new Chart(errCtx,{
          type:'bar',
          data:{labels:['Predicted (m)','Error (%)'],datasets:[{data:[245,8.7],backgroundColor:['#3A4C45','#A2E2C9']}]},
          options:{responsive:true,scales:{y:{beginAtZero:true}},plugins:{legend:{display:false}}}
        });
      }
    });
  </script>
</body>
</html>